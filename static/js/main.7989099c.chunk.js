(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{129:function(e,t,a){e.exports=a(214)},134:function(e,t,a){},152:function(e,t,a){},169:function(e,t,a){},177:function(e,t,a){},208:function(e,t){},211:function(e,t,a){},212:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),s=a(13),l=a.n(s),i=(a(134),a(6)),c=a(7),u=a(9),h=a(8),d=a(10),m=a(30),p=a(38),f=a(17),g=a.n(f),b=a(12),v=a.n(b),E=a(20),w="https://fireshare-86526.herokuapp.com",y=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"retrieveFiles",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"auth-token":sessionStorage.getItem("USER_TOKEN")}},e.next=3,g.a.get("".concat(w,"/user"),n);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveInfo",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.a,e.t1="".concat(w,"/user/info"),e.next=4,n;case 4:return e.t2=e.sent,e.next=7,e.t0.get.call(e.t0,e.t1,e.t2);case 7:return t=e.sent,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllUser",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/user/all"),n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("owner",sessionStorage.getItem("USER_ID")),e.next=5,g.a.post("".concat(w,"/user/upload"),a,{"auth-token":sessionStorage.getItem("USER_TOKEN"),"content-type":"multipart/form-data"});case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"shareFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/user/share/").concat(t),a,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"unShareFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/user/unshare/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/user/update/").concat(t),{name:a},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"retrieveSharedUser",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/user/share/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat(w,"/user/delete/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/").concat(t),{"auth-token":sessionStorage.getItem("USER_TOKEN"),"content-type":"multipart/form-data",responseType:"blob"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),O=(a(152),a(119)),k=a(221),S=(a(90),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleOnDrag=function(e){e.preventDefault(),a.setState({onDrag:!0})},a.handleOnDragLeave=function(){a.setState({onDrag:!1})},a.handleTraditionUploadFile=function(e){a.state.file&&a.props.showAlert("Watch out!","You are overriding your previous file","warning"),a.setState({file:e.target.files[0]})},a.handleDropFile=function(e){e.preventDefault(),a.state.file&&a.props.showAlert("Watch out!","You are overriding your previous file","warning"),a.setState({onDrag:!1,file:e.dataTransfer.files[0]})},a.openFileDialog=function(){a.fileInput.current.click()},a.uploadFile=function(){var e=a.state.file;e?y.uploadFile(e).then((function(e){a.props.openModal(!1),a.props.fetchFiles(),a.setState({file:null}),a.props.showAlert("Success!","We are uploading your file..","success")})).catch((function(e){a.props.showAlert("Error!","Uh oh, something is wrong","danger")})):a.props.showAlert("Warning!","You have to choose a file first","danger")},a.state={file:null,onDrag:!1},a.fileInput=o.a.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.onDrag,n=t.file;return o.a.createElement(k.a,{show:this.props.show,onHide:function(){return e.props.openModal(!1)}},o.a.createElement(k.a.Header,{closeButton:!0},o.a.createElement(k.a.Title,null,"Upload file")),o.a.createElement(k.a.Body,null,o.a.createElement("h6",null,"Click to select files from your computer or drag and drop to the area"),o.a.createElement("input",{className:"d-none",ref:this.fileInput,type:"file",name:"files[]",onChange:this.handleTraditionUploadFile}),o.a.createElement("div",{className:"upload-drop-zone"+(a?" drop":""),id:"drop-zone",onDragOver:this.handleOnDrag,onDrop:this.handleDropFile,onDragLeave:this.handleOnDragLeave,onClick:this.openFileDialog},n?"You have chosen ".concat(n.name):"Just drag and drop files here")),o.a.createElement(k.a.Footer,null,o.a.createElement(O.a,{variant:"secondary",onClick:function(){return e.props.openModal(!1)}},"Close"),o.a.createElement(O.a,{variant:"primary",onClick:this.uploadFile,disabled:null!==n?"":"disabled"},"Upload File")))}}]),t}(r.Component)),j=a(217),F=(a(169),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={show:a.props.show},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(j.a,{className:"fix-alert",show:this.props.show,variant:this.props.type,onClose:function(){return e.props.handleShow(!1)},dismissible:!0},o.a.createElement(j.a.Heading,null,this.props.heading),o.a.createElement("p",null,this.props.message))}}]),t}(r.Component)),C=a(127),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleClick=function(e){var t=a.state.toggle;t?a.props.remove(e):a.props.select(e),a.setState({toggle:!t})},a.state={toggle:a.props.shared},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.shared!==this.props.shared&&this.setState({toggle:e.shared})}},{key:"render",value:function(){var e=this,t=this.state.toggle,a=this.props,n=a.user,r=a.display;a.shared;return o.a.createElement("div",{className:"userHolder",style:{display:r}},o.a.createElement("span",null,n.email),o.a.createElement("button",{className:"btn"+(t?" btn-secondary":" btn-outline-secondary"),onClick:function(){return e.handleClick(n)}},t?"Remove":"Select"))}}]),t}(r.Component),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).fetchUsers=function(){var e=a.props.file;y.getAllUser().then((function(e){a.setState({allUser:e.data})})),y.retrieveSharedUser(e).then((function(e){a.setState({selectedUser:e.data,wasSharing:e.data.length>0})})).catch((function(e){console.error(e)}))},a.handleSelect=function(e){a.setState({selectedUser:[].concat(Object(C.a)(a.state.selectedUser),[e._id])})},a.handleRemove=function(e){a.setState({selectedUser:a.state.selectedUser.filter((function(t){return t!==e._id}))})},a.handleFilter=function(e){a.setState({filter:e.target.value})},a.handleShare=function(){var e=a.state.selectedUser,t=a.props.file;y.shareFile(t,e).then((function(t){a.props.showAlert("Success!","Done, you have shared your file with ".concat(e.length," people"),"success"),a.props.openModal(!1)})).catch((function(e){a.props.showAlert("Error!","Uh oh, something is wrong","danger")}))},a.sortFunc=function(e,t){var n=a.state.selectedUser,r=n.indexOf(e._id),o=n.indexOf(t._id);return r<o?1:r>o?-1:0},a.state={selectedUser:[],allUser:[],shared:[],filter:"",wasSharing:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedUser,n=t.filter,r=t.wasSharing,s=0==a.length&&r;return o.a.createElement(k.a,{show:this.props.show,onHide:function(){return e.props.openModal(!1)}},o.a.createElement(k.a.Header,{closeButton:!0},o.a.createElement(k.a.Title,null,"Share file")),o.a.createElement(k.a.Body,null,o.a.createElement("h6",null,"Type in the user's email you want to share with"),o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's email","aria-describedby":"basic-addon2",onChange:this.handleFilter}),o.a.createElement("div",{className:"listUser"},this.state.allUser.sort(this.sortFunc).map((function(t,r){var s=-1!==t.email.indexOf(n)?"":"none",l=a.includes(t._id);return o.a.createElement(N,{user:t,key:t._id,select:e.handleSelect,remove:e.handleRemove,display:s,shared:l})})))),o.a.createElement(k.a.Footer,null,o.a.createElement(O.a,{variant:"secondary",onClick:function(){return e.props.openModal(!1)}},"Close"),o.a.createElement(O.a,{variant:s?"danger":"primary",onClick:this.handleShare,disabled:a.length>0||r?"":"disabled"},s?"Don't Share":"Share")))}}]),t}(r.Component),D=a(219),A=a(57),U=a.n(A),I=a(58),M=a(59),R=a(223),T=a(224),L=a(218),P=a(120),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleEdit=function(){a.state.editing;a.setState({editing:!0})},a.handleChange=function(e){a.setState({rename:e.target.value})},a.handleSubmit=function(){var e=a.state,t=e.file,n=e.rename;P(n)?(y.updateFile(t._id,n).then((function(){a.props.showAlert("Success!","Done, changed the name from ".concat(t.name," to ").concat(n),"success"),a.props.fetchFiles()})).catch((function(e){console.log(e),a.props.showAlert("Error!","Uhoh, something is wrong","danger")})),a.setState({editing:!1})):a.props.showAlert("Error!","Invalid filename","warning")},a.state={file:a.props.file,editing:!1,rename:a.props.file.name},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.file!==this.props.file&&this.setState({file:e.file})}},{key:"render",value:function(){var e=this,t=this.state,a=t.file,n=t.editing,r=t.rename;return o.a.createElement("td",null,o.a.createElement(T.a,{placement:"bottom",overlay:o.a.createElement(L.a,{id:"tooltip-bottom"},"Click to edit file name")},o.a.createElement("div",{onClick:this.handleEdit},n?o.a.createElement("input",{type:"text",value:r,onChange:this.handleChange,onBlur:this.handleSubmit,onKeyPress:function(t){"Enter"===t.key&&e.handleSubmit()}}):a.name)))}}]),t}(r.Component),W=a(60),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleDownload=function(e){y.downloadFile(e.download).then((function(t){W(t.data,e.name),a.props.showAlert("Success!","Downloading ".concat(e.name,"."),"info")})).catch((function(e){console.error(e),a.props.showAlert("Error!","Uh oh, something is wrong.","danger")}))},a.state={myFiles:a.props.myFiles},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.myFiles!==this.props.myFiles&&this.setState({myFiles:e.myFiles})}},{key:"render",value:function(){var e=this;return o.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"File name"),o.a.createElement("th",null,"Size (kb)"),o.a.createElement("th",null,"Modified"),o.a.createElement("th",null,"Owner"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,this.state.myFiles.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,a),o.a.createElement(_,{file:t,fetchFiles:e.props.fetchFiles,showAlert:e.props.showAlert}),o.a.createElement("td",null,Math.round(100*t.size)/1e5),o.a.createElement("td",null,U()(t.date).fromNow()),o.a.createElement("td",null,t.ownerEmail),o.a.createElement("td",{className:"text-center actionIcon"},o.a.createElement(R.a,null,o.a.createElement(R.a.Toggle,null,o.a.createElement(I.a,{icon:M.a})),o.a.createElement(R.a.Menu,null,o.a.createElement(R.a.Item,{onClick:function(){return e.handleDownload(t)}},"Download"),o.a.createElement(R.a.Item,{onClick:function(){return e.props.selectFile(t._id)}},"Share"),o.a.createElement(R.a.Item,{onClick:function(){return e.props.deleteFile(t)}},"Delete")))))}))))}}]),t}(r.Component),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleDownload=function(e){y.downloadFile(e.download).then((function(t){W(t.data,e.name),a.props.showAlert("Success!","Downloading ".concat(e.name,"."),"info")})).catch((function(e){console.error(e),a.props.showAlert("Error!","Uh oh, something is wrong.","danger")}))},a.handleUnshare=function(e){y.unShareFile(e._id).then((function(t){a.props.socket.emit("unsubscribe",e._id),a.props.showAlert("Success!","You have unshared ".concat(e.name," with ").concat(e.ownerEmail,"."),"success"),a.props.fetchFiles()})).catch((function(e){a.props.showAlert("Error!","Uhh ohh, something is wrong, we can't unshare this file.","danger"),a.props.fetchFiles()}))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"File name"),o.a.createElement("th",null,"Size (kb)"),o.a.createElement("th",null,"Modified"),o.a.createElement("th",null,"Owner"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,this.props.sharedWithMe.map((function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,a),o.a.createElement("td",null,t.name),o.a.createElement("td",null,Math.round(100*t.size)/1e5),o.a.createElement("td",null,U()(t.date).fromNow()),o.a.createElement("td",null,t.ownerEmail),o.a.createElement("td",{className:"text-center actionIcon"},o.a.createElement(R.a,null,o.a.createElement(R.a.Toggle,null,o.a.createElement(I.a,{icon:M.a})),o.a.createElement(R.a.Menu,null,o.a.createElement(R.a.Item,{onClick:function(){return e.handleDownload(t)}},"Download"),o.a.createElement(R.a.Item,{onClick:function(){return e.handleUnshare(t)}},"Unshare")))))}))))}}]),t}(r.Component),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).deleteFile=function(){var e=a.state.file;y.deleteFile(e._id).then((function(){a.props.showAlert("Success!","Done, you have successfully deleted ".concat(e.name,"."),"primary"),a.props.openModal(!1),a.props.fetchFiles()})).catch((function(e){a.props.showAlert("Error!","Hmmm, something is wrong.","danger"),a.props.openModal(!1)}))},a.state={file:a.props.file},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.file;return o.a.createElement(k.a,{show:this.props.show,onHide:function(){return e.props.openModal(!1)}},o.a.createElement(k.a.Header,{closeButton:!0},o.a.createElement(k.a.Title,null,"Delete a file")),o.a.createElement(k.a.Body,null,o.a.createElement("h6",{className:"text-center"},"Delete a file can cause permanently removed"),o.a.createElement("p",{className:"text-center"},"Are you sure you want to delete ",o.a.createElement("i",null,t.name),"?")),o.a.createElement(k.a.Footer,null,o.a.createElement(O.a,{variant:"secondary",onClick:function(){return e.props.openModal(!1)}},"Close"),o.a.createElement(O.a,{variant:"danger",onClick:this.deleteFile},"Delete")))}}]),t}(r.Component);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Y=o.a.createElement("circle",{cx:50,cy:50,"ng-attr-r":"{{config.radius}}","ng-attr-stroke":"{{config.base}}","ng-attr-stroke-width":"{{config.width}}",fill:"none",r:30,stroke:"#5699d2",strokeWidth:10}),J=o.a.createElement("circle",{cx:50,cy:50,"ng-attr-r":"{{config.radius}}","ng-attr-stroke":"{{config.stroke}}","ng-attr-stroke-width":"{{config.innerWidth}}","ng-attr-stroke-linecap":"{{config.linecap}}",fill:"none",r:30,stroke:"#1d3f72",strokeWidth:10,strokeLinecap:"square",transform:"rotate(108.354 50 50)"},o.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;180 50 50;720 50 50",keyTimes:"0;0.5;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"stroke-dasharray",calcMode:"linear",values:"18.84955592153876 169.64600329384882;94.2477796076938 94.24777960769377;18.84955592153876 169.64600329384882",keyTimes:"0;0.5;1",dur:1,begin:"0s",repeatCount:"indefinite"})),$=function(e){var t=e.svgRef,a=e.title,n=z(e,["svgRef","title"]);return o.a.createElement("svg",q({width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-ring",ref:t},n),a?o.a.createElement("title",null,a):null,Y,J)},G=o.a.forwardRef((function(e,t){return o.a.createElement($,q({svgRef:t},e))})),Q=(a.p,a(177),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={display:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({display:this.props.display})}},{key:"render",value:function(){return o.a.createElement("div",{className:"loading"},o.a.createElement(G,null))}}]),t}(r.Component)),V=a(222),X=a(220),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).logout=function(){sessionStorage.clear(),a.props.socket.emit("disconnect"),window.location.reload()},a.state={email:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.retrieveInfo().then((function(t){e.setState({email:t.data.email}),e.props.socket.emit("register",t.data._id)})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){return o.a.createElement(V.a,{bg:"light",expand:"lg",sticky:"top"},o.a.createElement(V.a.Brand,{href:"#home"},"FireShare"),o.a.createElement(V.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(V.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(X.a,{className:"mr-auto"}),o.a.createElement(V.a.Text,{style:{color:"black"}},this.state.email),o.a.createElement(O.a,{className:"ml-2",variant:"outline-dark",onClick:this.logout},"Log out")))}}]),t}(r.Component),ee=Object(p.g)(Z),te=a(126),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleSocket=function(){a.state.total.forEach((function(e){a.socket.emit("subscribe",e)})),a.socket.on("subscribe",(function(e){a.socket.emit("subscribe",e),a.fetchFiles()})),a.socket.on("unsubscribe",(function(e){a.socket.emit("unsubscribe",e),a.fetchFiles()})),a.socket.on("update",(function(){a.fetchFiles()}))},a.fetchFiles=function(){a.setState({loading:!0}),y.retrieveFiles().then((function(e){a.setState({myFiles:e.data.myFiles,sharedWithMe:e.data.sharedWithMe,total:e.data.total,loading:!1},(function(){a.handleSocket()}))}))},a.openModal=function(e){a.setState({showUpload:e})},a.openShareModal=function(e){a.setState({showShare:e})},a.openDeleteModal=function(e){a.setState({showDelete:e})},a.handleShow=function(e){a.setState({showAlert:e}),setTimeout((function(){a.setState({showAlert:!1})}),2e3)},a.showAlert=function(e,t,n){a.handleShow(!0),a.setState({heading:e,message:t,type:n})},a.selectFile=function(e){a.setState({selectedFile:e,showShare:!0})},a.deleteFile=function(e){a.setState({showDelete:!0,fileToDelete:e})},a.state={myFiles:[],sharedWithMe:[],showUpload:!1,showAlert:!1,showShare:!1,selectedFile:null,fileToDelete:null,showDelete:!1,loading:!0,total:[]},a.socket=te(w),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){g.a.defaults.headers.common["auth-token"]=sessionStorage.getItem("USER_TOKEN"),this.fetchFiles()}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee,{socket:this.socket}),o.a.createElement("div",{className:"container mt-5 align-content-center"},this.state.loading&&o.a.createElement(Q,null),o.a.createElement(F,{show:this.state.showAlert,heading:this.state.heading,message:this.state.message,type:this.state.type,handleShow:this.handleShow}),this.state.showUpload&&o.a.createElement(S,{show:this.state.showUpload,openModal:this.openModal,showAlert:this.showAlert,fetchFiles:this.fetchFiles}),this.state.showShare&&o.a.createElement(x,{show:this.state.showShare,openModal:this.openShareModal,showAlert:this.showAlert,file:this.state.selectedFile}),this.state.showDelete&&o.a.createElement(K,{show:this.state.showDelete,openModal:this.openDeleteModal,fetchFiles:this.fetchFiles,showAlert:this.showAlert,file:this.state.fileToDelete}),o.a.createElement("div",{className:"table-head"},o.a.createElement("div",{className:"pull-left"},o.a.createElement("p",null,"My File")),o.a.createElement("div",{className:"pull-right"},o.a.createElement(O.a,{className:"mb-2 float-right",onClick:function(){e.openModal(!0)}},"Upload file")),o.a.createElement("div",{className:"clearfix"})),o.a.createElement(B,{myFiles:this.state.myFiles,selectFile:this.selectFile,deleteFile:this.deleteFile,fetchFiles:this.fetchFiles,showAlert:this.showAlert}),o.a.createElement("div",{className:"table-head"},o.a.createElement("div",{className:"pull-left"},o.a.createElement("p",null,"Shared with me")),o.a.createElement("div",{className:"clearfix"})),o.a.createElement(H,{sharedWithMe:this.state.sharedWithMe,showAlert:this.showAlert,fetchFiles:this.fetchFiles,socket:this.socket})))}}]),t}(r.Component),ne=Object(p.g)(ae),re=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("h1",{className:"text-center"},"404 NotFound")}}]),t}(r.Component),oe=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"registerNewAccount",value:function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/register"),{email:t,password:a});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"authenticateAccount",value:function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/login"),{email:t,password:a});case 2:return n=e.sent,r=n.status,o=n.data,200===r&&this.setupAxiosConfigure(o),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"setupAxiosConfigure",value:function(e){var t=e.token,a=e.id;t&&a&&(sessionStorage.setItem("USER_TOKEN",t),sessionStorage.setItem("USER_ID",a),g.a.defaults.headers.common["auth-token"]=sessionStorage.getItem("USER_TOKEN"))}},{key:"isUserLoggedIn",value:function(){return null!==sessionStorage.getItem("USER_TOKEN")}}]),e}()),se=a(46),le=a(128);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ce=function(e){var t=e.children,a=e.authed,n=Object(le.a)(e,["children","authed"]);return o.a.createElement(p.b,Object.assign({},n,{exact:!0,render:function(e){return a?o.a.createElement(o.a.Fragment,null,r.Children.map(t,(function(e){return Object(r.cloneElement)(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.props))}))):o.a.createElement(p.a,{to:"/login"})}}))},ue=(a(211),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).inputChecking=function(){var e=a.state,t=e.email,n=e.password;return n.length>=6&&n.length<=100&&t.length>=6&&t.length<1e3},a.handleChange=function(e){a.setState(Object(se.a)({},e.target.name,e.target.value),(function(){var e=a.state;e.retype,e.password;a.inputChecking()?a.setState({valid:!0}):a.setState({valid:!1})}))},a.handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0,pressed:!0});var t=a.props,n=t.history,r=t.isLoggedIn,o=t.handleLogin;oe.authenticateAccount(a.state.email,a.state.password).then((function(){!1===r&&(o(),n.push("/dashboard"))})).catch((function(e){console.log(e),a.setState({loading:!1}),a.props.showAlert("Error!","Sorry, we cannot verify your account","danger"),a.setState({pressed:!1})}))},a.state={email:"",password:"",show:!1,heading:"",message:"",type:"",valid:!1,pressed:!1,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){oe.isUserLoggedIn()&&!this.props.isLoggedIn&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state,t=e.valid,a=e.loading,n=e.pressed;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(Q,null),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-9 col-md-7 col-lg-5 mx-auto"},o.a.createElement("div",{className:"card card-signin my-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title text-center"},"Sign In"),o.a.createElement("form",{className:"form-signin",autoComplete:"off"},o.a.createElement("div",{className:"form-label-group"},o.a.createElement("input",{type:"email",name:"email",id:"inputEmail",className:"form-control",placeholder:"Email address",onChange:this.handleChange,required:!0,autoFocus:!0,autoComplete:"off"}),o.a.createElement("label",{htmlFor:"inputEmail"},"Email address")),o.a.createElement("div",{className:"form-label-group"},o.a.createElement("input",{type:"password",name:"password",id:"inputPassword",className:"form-control",placeholder:"Password",onChange:this.handleChange,required:!0,autoComplete:"off"}),o.a.createElement("label",{htmlFor:"inputPassword"},"Password")),o.a.createElement("button",{className:"btn btn-lg btn-primary btn-block text-uppercase",type:"submit",onClick:this.handleSubmit,disabled:t&&!n?"":"disabled"},"Sign in"),o.a.createElement(m.b,{to:"/register",className:"d-block text-center mt-2 small"},"Sign Up"))))))))}}]),t}(r.Component)),he=Object(p.g)(ue),de=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(se.a)({},e.target.name,e.target.value),(function(){var e=a.state;e.retype==e.password&&a.inputChecking()?a.setState({valid:!0}):a.setState({valid:!1})}))},a.inputChecking=function(){var e=a.state,t=e.email,n=e.password;return n.length>=6&&n.length<=100&&t.length>=6&&t.length<1e3},a.handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0,pressed:!0});var t=a.state,n=t.valid,r=t.email,o=t.password;n&&oe.registerNewAccount(r,o).then((function(){a.setState({redirect:!0,loading:!1}),a.props.showAlert("Successful!","Look who just got an account","success")})).catch((function(e){console.error(e),a.props.showAlert("Error!","Sorry, email is already in used","warning"),a.setState({pressed:!1})}))},a.state={email:"",password:"",retype:"",redirect:!1,valid:!1,loading:!1,pressed:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){oe.isUserLoggedIn()&&!this.props.isLoggedIn&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.valid,n=e.loading,r=e.pressed;return t?o.a.createElement(p.a,{to:"/login"}):o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(Q,null),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-10 col-xl-9 mx-auto"},o.a.createElement("div",{className:"card card-signin flex-row my-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title text-center"},"Register"),o.a.createElement("form",{className:"form-signin",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-label-group"},o.a.createElement(T.a,{placement:"bottom",overlay:o.a.createElement(L.a,{id:"tooltip-bottom"},"Length must greater than 6")},o.a.createElement("input",{type:"email",name:"email",id:"inputEmail",className:"form-control",placeholder:"Email address",onChange:this.handleChange,required:!0,autoComplete:"off"})),o.a.createElement("label",{htmlFor:"inputEmail"},"Email address")),o.a.createElement("div",{className:"form-label-group"},o.a.createElement(T.a,{placement:"bottom",overlay:o.a.createElement(L.a,{id:"tooltip-bottom"},"Length must greater than 6")},o.a.createElement("input",{type:"password",name:"password",id:"inputPassword",className:"form-control",placeholder:"Password",onChange:this.handleChange,required:!0,autoComplete:"off"})),o.a.createElement("label",{htmlFor:"inputPassword"},"Password")),o.a.createElement("div",{className:"form-label-group"},o.a.createElement("input",{type:"password",name:"retype",id:"retypePassword",className:"form-control",placeholder:"Retype password",onChange:this.handleChange,required:!0,autoComplete:"off"}),o.a.createElement("label",{htmlFor:"retypePassword"},"Retype Password")),o.a.createElement("button",{className:"btn btn-lg btn-primary btn-block text-uppercase",type:"submit",disabled:a&&!r?"":"disabled"},"Register"),o.a.createElement(m.b,{to:"/login",className:"d-block text-center mt-2 small"},"Sign In"))))))))}}]),t}(r.Component),me=Object(p.g)(de),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).showAlert=function(e,t,n){a.handleShow(!0),a.setState({heading:e,message:t,type:n})},a.handleShow=function(e){a.setState({show:e}),setTimeout((function(){a.setState({show:!1})}),2e3)},a.handleLogIn=function(){a.setState({isLoggedIn:!0})},a.state={show:!1,heading:"",message:"",type:"",isLoggedIn:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null," ",o.a.createElement(F,{show:this.state.show,heading:this.state.heading,message:this.state.message,type:this.state.type,handleShow:this.handleShow}),o.a.createElement(m.a,null,o.a.createElement(p.d,null,o.a.createElement(p.b,{path:"/login"},o.a.createElement(he,{handleLogin:this.handleLogIn,isLoggedIn:this.state.isLoggedIn,showAlert:this.showAlert})),o.a.createElement(p.b,{path:"/register"},o.a.createElement(me,{isLoggedIn:this.state.isLoggedIn,showAlert:this.showAlert})),o.a.createElement(ce,{authed:oe.isUserLoggedIn(),path:"/dashboard"},o.a.createElement(ne,null)),o.a.createElement(ce,{authed:oe.isUserLoggedIn(),path:"/"},o.a.createElement(ne,null)),o.a.createElement(p.b,{component:re}))))}}]),t}(r.Component),fe=(a(212),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(pe,null)}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(213);l.a.render(o.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){}},[[129,1,2]]]);
//# sourceMappingURL=main.7989099c.chunk.js.map